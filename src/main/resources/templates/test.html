<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>카카오 로그인 토큰 확인</title>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("/api/cookie")
            .then(response => response.json())
            .then(data => {
                let kakaoToken = data.kakao_token;
                let googleToken = data.google_token;
                let tokenText = "";

                if (kakaoToken) {
                    tokenText += "카카오 토큰: " + kakaoToken + "<br>";
                }
                if (googleToken) {
                    tokenText += "구글 토큰: " + googleToken;
                }
                if (!tokenText) {
                    tokenText = "쿠키에 토큰이 저장되지 않았습니다.";
                }

                document.getElementById("cookieToken").innerHTML = tokenText;
            })
            .catch(error => console.error("Error fetching cookies:", error));
    });

    </script>

</head>
<body>
<h1>카카오 로그인 완료</h1>

<h2>📌 Access Token</h2>
<p>서버에서 받은 토큰: <span th:text="${jwtToken}"></span></p>
<p>쿠키에 저장된 토큰: <span id="cookieToken"></span></p>

<h2>📌 사용자 정보</h2>
<ul>
    <li><strong>ID :</strong> <span th:text="${user.id}"></span></li>
    <li><strong>username :</strong> <span th:text="${user.username}"></span></li>
    <li><strong>email : </strong> <span th:text="${user.email}"></span></li>
</ul>

<a class="btn btn-secondary" href="/">home</a>
</body>
</html>
